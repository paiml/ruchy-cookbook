// Recipe 1.4: Basic Data Types - Unit Tests
// EXTREME TDD: Write tests FIRST, then implementation

// ============================================
// INTEGER TESTS
// ============================================

fun test_i32_basic() -> bool {
    let x: i32 = 42
    x == 42
}

fun test_i32_negative() -> bool {
    let x: i32 = -100
    x == -100
}

fun test_i32_zero() -> bool {
    let x: i32 = 0
    x == 0
}

fun test_i32_arithmetic() -> bool {
    let x = 10
    let y = 5
    let sum = x + y
    let diff = x - y
    let prod = x * y
    let quot = x / y
    sum == 15 && diff == 5 && prod == 50 && quot == 2
}

// ============================================
// FLOAT TESTS
// ============================================

fun test_f64_basic() -> bool {
    let x: f64 = 3.14
    x == 3.14
}

fun test_f64_negative() -> bool {
    let x: f64 = -2.5
    x == -2.5
}

fun test_f64_arithmetic() -> bool {
    let x = 10.0
    let y = 3.0
    let sum = x + y
    let diff = x - y
    let prod = x * y
    sum == 13.0 && diff == 7.0 && prod == 30.0
}

// ============================================
// BOOLEAN TESTS
// ============================================

fun test_bool_true() -> bool {
    let x: bool = true
    x == true
}

fun test_bool_false() -> bool {
    let x: bool = false
    x == false
}

fun test_bool_operators() -> bool {
    let a = true
    let b = false
    let and_result = a && b
    let or_result = a || b
    let not_a = !a
    and_result == false && or_result == true && not_a == false
}

// ============================================
// STRING TESTS
// ============================================

fun test_string_literal() -> bool {
    let s = "Hello"
    s == "Hello"
}

fun test_string_empty() -> bool {
    let s = ""
    s == ""
}

fun test_string_concatenation() -> bool {
    let s1 = "Hello"
    let s2 = "World"
    // Note: May need to test actual concatenation method
    s1 == "Hello" && s2 == "World"
}

// ============================================
// COMPARISON TESTS
// ============================================

fun test_equality() -> bool {
    let x = 5
    let y = 5
    let z = 10
    x == y && !(x == z)
}

fun test_inequality() -> bool {
    let x = 5
    let y = 10
    x != y
}

fun test_less_than() -> bool {
    let x = 5
    let y = 10
    x < y
}

fun test_greater_than() -> bool {
    let x = 10
    let y = 5
    x > y
}

fun test_less_equal() -> bool {
    let x = 5
    let y = 5
    let z = 10
    x <= y && x <= z
}

fun test_greater_equal() -> bool {
    let x = 10
    let y = 10
    let z = 5
    x >= y && x >= z
}

// ============================================
// TYPE MIXING TESTS
// ============================================

fun test_mixed_arithmetic_int_float() -> bool {
    let x = 10
    let y = 3.0
    // May need explicit conversion
    let result = x as f64 / y
    result > 3.0 && result < 4.0
}

fun test_integer_division() -> bool {
    let x = 10
    let y = 3
    let result = x / y
    result == 3  // Integer division truncates
}

fun test_float_division() -> bool {
    let x = 10.0
    let y = 3.0
    let result = x / y
    result > 3.3 && result < 3.4
}

// ============================================
// SPECIAL VALUES TESTS
// ============================================

fun test_max_values() -> bool {
    // Test that large values work
    let large_int = 2147483647  // Max i32
    large_int > 0
}

fun test_min_values() -> bool {
    // Test that small values work
    let small_int = -2147483648  // Min i32 (approximately)
    small_int < 0
}

// ============================================
// MODULO TESTS
// ============================================

fun test_modulo_operation() -> bool {
    let x = 10
    let y = 3
    let remainder = x % y
    remainder == 1
}

fun test_even_odd() -> bool {
    let even = 10
    let odd = 11
    // Note: Ruchy doesn't like outer parens around compound boolean returns
    even % 2 == 0 && odd % 2 == 1
}

// ============================================
// TEST RUNNER
// ============================================

fun main() {
    println("╔═══════════════════════════════════════════════════╗")
    println("║  Recipe 1.4: Basic Data Types - Tests            ║")
    println("╚═══════════════════════════════════════════════════╝")
    println("")

    let mut passed = 0
    let mut total = 0

    println("=== Integer Tests ===")
    total = total + 1
    if test_i32_basic() {
        println("✅ Test 1: i32 basic")
        passed = passed + 1
    } else {
        println("❌ Test 1: FAILED")
    }

    total = total + 1
    if test_i32_negative() {
        println("✅ Test 2: i32 negative")
        passed = passed + 1
    } else {
        println("❌ Test 2: FAILED")
    }

    total = total + 1
    if test_i32_zero() {
        println("✅ Test 3: i32 zero")
        passed = passed + 1
    } else {
        println("❌ Test 3: FAILED")
    }

    total = total + 1
    if test_i32_arithmetic() {
        println("✅ Test 4: i32 arithmetic")
        passed = passed + 1
    } else {
        println("❌ Test 4: FAILED")
    }

    println("")
    println("=== Float Tests ===")
    total = total + 1
    if test_f64_basic() {
        println("✅ Test 5: f64 basic")
        passed = passed + 1
    } else {
        println("❌ Test 5: FAILED")
    }

    total = total + 1
    if test_f64_negative() {
        println("✅ Test 6: f64 negative")
        passed = passed + 1
    } else {
        println("❌ Test 6: FAILED")
    }

    total = total + 1
    if test_f64_arithmetic() {
        println("✅ Test 7: f64 arithmetic")
        passed = passed + 1
    } else {
        println("❌ Test 7: FAILED")
    }

    println("")
    println("=== Boolean Tests ===")
    total = total + 1
    if test_bool_true() {
        println("✅ Test 8: bool true")
        passed = passed + 1
    } else {
        println("❌ Test 8: FAILED")
    }

    total = total + 1
    if test_bool_false() {
        println("✅ Test 9: bool false")
        passed = passed + 1
    } else {
        println("❌ Test 9: FAILED")
    }

    total = total + 1
    if test_bool_operators() {
        println("✅ Test 10: bool operators")
        passed = passed + 1
    } else {
        println("❌ Test 10: FAILED")
    }

    println("")
    println("=== String Tests ===")
    total = total + 1
    if test_string_literal() {
        println("✅ Test 11: string literal")
        passed = passed + 1
    } else {
        println("❌ Test 11: FAILED")
    }

    total = total + 1
    if test_string_empty() {
        println("✅ Test 12: string empty")
        passed = passed + 1
    } else {
        println("❌ Test 12: FAILED")
    }

    total = total + 1
    if test_string_concatenation() {
        println("✅ Test 13: string concatenation")
        passed = passed + 1
    } else {
        println("❌ Test 13: FAILED")
    }

    println("")
    println("=== Comparison Tests ===")
    total = total + 1
    if test_equality() {
        println("✅ Test 14: equality")
        passed = passed + 1
    } else {
        println("❌ Test 14: FAILED")
    }

    total = total + 1
    if test_inequality() {
        println("✅ Test 15: inequality")
        passed = passed + 1
    } else {
        println("❌ Test 15: FAILED")
    }

    total = total + 1
    if test_less_than() {
        println("✅ Test 16: less than")
        passed = passed + 1
    } else {
        println("❌ Test 16: FAILED")
    }

    total = total + 1
    if test_greater_than() {
        println("✅ Test 17: greater than")
        passed = passed + 1
    } else {
        println("❌ Test 17: FAILED")
    }

    total = total + 1
    if test_less_equal() {
        println("✅ Test 18: less equal")
        passed = passed + 1
    } else {
        println("❌ Test 18: FAILED")
    }

    total = total + 1
    if test_greater_equal() {
        println("✅ Test 19: greater equal")
        passed = passed + 1
    } else {
        println("❌ Test 19: FAILED")
    }

    println("")
    println("=== Type Mixing Tests ===")
    total = total + 1
    if test_mixed_arithmetic_int_float() {
        println("✅ Test 20: mixed arithmetic")
        passed = passed + 1
    } else {
        println("❌ Test 20: FAILED")
    }

    total = total + 1
    if test_integer_division() {
        println("✅ Test 21: integer division")
        passed = passed + 1
    } else {
        println("❌ Test 21: FAILED")
    }

    total = total + 1
    if test_float_division() {
        println("✅ Test 22: float division")
        passed = passed + 1
    } else {
        println("❌ Test 22: FAILED")
    }

    println("")
    println("=== Special Values Tests ===")
    total = total + 1
    if test_max_values() {
        println("✅ Test 23: max values")
        passed = passed + 1
    } else {
        println("❌ Test 23: FAILED")
    }

    total = total + 1
    if test_min_values() {
        println("✅ Test 24: min values")
        passed = passed + 1
    } else {
        println("❌ Test 24: FAILED")
    }

    println("")
    println("=== Modulo Tests ===")
    total = total + 1
    if test_modulo_operation() {
        println("✅ Test 25: modulo operation")
        passed = passed + 1
    } else {
        println("❌ Test 25: FAILED")
    }

    total = total + 1
    if test_even_odd() {
        println("✅ Test 26: even/odd")
        passed = passed + 1
    } else {
        println("❌ Test 26: FAILED")
    }

    println("")
    println("╔═══════════════════════════════════════════════════╗")
    println("║  Test Results: {}/{} tests passed                  ║", passed, total)
    println("╚═══════════════════════════════════════════════════╝")

    if passed == total {
        println("✅ All tests PASSED!")
    } else {
        println("❌ Some tests FAILED")
    }
}
